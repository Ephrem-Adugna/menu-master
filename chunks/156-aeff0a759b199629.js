(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{1762:function(e,t,a){"use strict";a.r(t);var n=a(5893),i=a(1477),s=a.n(i),r=a(9332),l=a(7294),c=a(3299),m=a(5675),o=a.n(m),u=a(9355),d=a(5400);t.default=e=>{let{data:t,status:a}=(0,c.useSession)(),[i,m]=(0,l.useState)({}),[h,p]=(0,l.useState)(!1),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});if((0,r.useRouter)(),(0,l.useEffect)(()=>{e||e.goToMenu(),console.log(t),function(){let t=(0,u.iH)((0,u.N8)());(0,u.U2)((0,u.iU)(t,"menu/".concat(null==e?void 0:e.id))).then(e=>{e.exists()&&m(e.val())}).catch(e=>{console.error(e)})}()},[]),i){var _,N;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(s().paymentAlert," ").concat(h&&s().visible),children:[(0,n.jsx)("span",{className:s().cancelButton,onClick:()=>{p(!1)},children:"X"}),(0,n.jsx)("span",{className:s().placeOrderTitle,children:"Place Order"}),(0,n.jsx)(d.default,{cost:i.itemPrice,itemId:null==e?void 0:e.id,email:null==t?void 0:null===(_=t.user)||void 0===_?void 0:_.email,name:null==t?void 0:null===(N=t.user)||void 0===N?void 0:N.name})]}),h&&(0,n.jsx)("div",{className:s().alertCover}),(0,n.jsxs)("div",{className:s().itemContainer,children:[(0,n.jsx)(o(),{className:s().itemImage,src:i.itemFile,width:300,height:400,alt:"foodimg"}),(0,n.jsxs)("div",{className:s().itemDetailsContainer,children:[(0,n.jsxs)("span",{className:s().itemName,children:[i.itemName," - ",v.format(i.itemPrice)]}),(0,n.jsx)("span",{className:s().itemPrice}),(0,n.jsx)("span",{className:s().itemDescription,children:i.itemDescription}),i.available&&(0,n.jsx)("span",{className:s().placeOrderBtn,onClick:()=>{p(!0)},children:"Place Order"}),!i.available&&(0,n.jsx)("span",{className:s().unavailableBtn,children:"Item Unavailable"})]})]})]})}return(0,n.jsx)(n.Fragment,{children:"Item Not Found"})}},5400:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(5893),i=a(7294),s=a(5021),r=a(9332),l=a(9355),c=a(9848),m=a.n(c),o=a(6154);let u=e=>o.Z.post("http://apilayer.net/api/validate?access_key=".concat("a6ba5ed0c334a1a1b8dc3410d52a7de8","&number=").concat(e,"&country_code=US& format = 1")),d={layout:"vertical"},h=e=>{let{currency:t,showSpinner:a,cost:c,formData:o,name:h,email:p,id:v}=e,[{options:_,isPending:N},b]=(0,s.Up)(),A=(0,r.useRouter)(),[x,f]=(0,i.useState)(!1),[j,g]=(0,i.useState)(!1),[I,C]=(0,i.useState)(""),[U,D]=(0,i.useState)("");return((0,i.useEffect)(()=>{b({type:"resetOptions",value:{..._,currency:t}})},[t,a]),x)?(0,n.jsxs)(n.Fragment,{children:[a&&N&&(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)(s.ch,{style:d,disabled:!1,forceReRender:[c,t,d],fundingSource:"card",createOrder:(e,a)=>a.order.create({purchase_units:[{amount:{currency_code:t,value:c}}],application_context:{shipping_preference:"NO_SHIPPING"}}).then(e=>e),onApprove:function(){!function(){let e=(0,l.N8)(),t=(0,l.VF)((0,l.iU)((0,l.iH)(e),"orders")).key,a={};var n=Math.floor(1e3+9e3*Math.random());sessionStorage.setItem("order",t);let i=(0,l.iH)((0,l.N8)());(0,l.U2)((0,l.iU)(i,"menu/".concat(v))).then(i=>{if(i.exists()){var s=i.val().itemName;a["/orders/"+t]={itemName:s,code:n,item:v,customerEmail:p,customerName:h,timestamp:function(){let e=new Date,t=e.getHours(),a=e.getMinutes(),n=t>=12?"PM":"AM";t=t%12||12;let i="".concat(t,":").concat(a<10?"0".concat(a):a," ").concat(n);return i}(),status:0,phoneNumber:U},(0,l.Vx)((0,l.iH)(e),a)}}).catch(e=>{console.error(e)})}(),A.push("/Menu/Order/Order")}})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!I.match(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/)){g(!0);return}u(I).then(e=>{if((null===(a=e.data)||void 0===a?void 0:a.success)==!1||(null===(n=e.data)||void 0===n?void 0:n.valid)==!1){g(!0);return}g(!1);let t=e.data.carrier;var a,n,i="";t.includes("AT&T")?i="@mms.att.net":t.includes("Boost Mobile")?i="@myboostmobile.com":t.includes("Cricket")?i="@mms.cricketwireless.net":t.includes("Sprint")?i="@pm.sprint.com":t.includes("T-Mobile")?i="@tmomail.net":t.includes("U.S. Cellular")?i="@mms.uscc.net":t.includes("Verizon")&&(i="@vzwpix.com"),D(I+i),f(!0)})},children:[(0,n.jsx)("label",{className:m().phoneNumberTitle,children:"Enter your Phone Number"}),(0,n.jsx)("input",{value:I,onChange:e=>{C(e.nativeEvent.target.value)},minLength:10,required:!0,className:m().phoneNumberInput,type:"number",placeholder:"Phone Number"}),(0,n.jsx)("input",{type:"submit",value:"Save",className:m().saveButton}),j&&(0,n.jsx)("span",{className:m().phoneNumberError,children:"Please use a valid phone number"}),"        "]})})};function p(e){let{cost:t,email:a,itemId:i,name:r}=e;return(0,n.jsx)("div",{style:{maxWidth:"750px",minHeight:"200px"},children:(0,n.jsx)(s.Vv,{options:{clientId:"AeY9DHNCVGTwXr1Of5PKZd9LcLFMC-Z2ODsqdU-LMcfhjmLYFusLBs1M3UQ29wUuD2hasUtxHNnhdFLv",components:"buttons",currency:"USD"},children:(0,n.jsx)(h,{currency:"USD",showSpinner:!0,cost:t,formData:{},email:a,id:i,name:r})})})}},1156:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(5893),i=a(8443),s=a.n(i),r=a(9332),l=a(7294),c=a(3299),m=a(5675),o=a.n(m),u=a(9355),d=a(1762),h={src:"/_next/static/media/addBtn.4439a59e.png",height:150,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAQAAACb+P2wAAAANElEQVR42mMAA2YGKGBEIhn8GMCAiUGT4RqDDZBm4GOYxfCeYTWDLAMYLGfggClhB2JkAAC93ASsVMRTbQAAAABJRU5ErkJggg==",blurWidth:5,blurHeight:8},p={src:"/_next/static/media/takeOrder.70a84c8f.png",height:150,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAiklEQVR42mPIiFFjYkAClSlCcD53c5GuN5DmhwmwrJzqmHd0jdf/dZN0ykF8hsMbfdu+303+//911t9fd2P+n1mvP4HhwgqPm092BX68vc7nx6MdgR8vLDB/wrCjxmjD4WbTo4erTP8caTE7urNMZxvDlmYz20N91k77J9lYHZlg67CtTs+eARsAAH9UOaZOVUO3AAAAAElFTkSuQmCC",blurWidth:5,blurHeight:8},v=()=>{let{data:e,status:t}=(0,c.useSession)(),[a,i]=(0,l.useState)([]),[m,v]=(0,l.useState)(!0),[_,N]=(0,l.useState)(!1),[b,A]=(0,l.useState)(),x=(0,r.useRouter)(),f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function j(){let e=(0,u.iH)((0,u.N8)());(0,u.U2)((0,u.iU)(e,"menu")).then(e=>{e.exists()?i(e.val()):i({})}).catch(e=>{console.error(e)})}function g(e){v(!1),A(e.toString())}return(0,l.useEffect)(()=>{let t=(0,u.iH)((0,u.N8)());(0,u.U2)((0,u.iU)(t,"admins")).then(a=>{if(a.exists()){var n=a.val(),i=!1;Object.values(n).forEach(a=>{e.user.email===a.email?(N(!0),i=!0):(0,u.U2)((0,u.iU)(t,"orders")).then(t=>{if(t.exists()){var a=t.val();Object.values(a).forEach((t,n)=>{if(t.customerEmail===e.user.email){let e=Object.keys(a)[n];sessionStorage.setItem("order",e),x.push("/Menu/Order/Order");return}})}}).catch(e=>{console.error(e)})}),i||j()}}).catch(e=>{console.error(e)})},[]),(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsxs)("div",{className:s().menuItemsContainer,children:[Object.values(a).map((e,t)=>(0,n.jsxs)("div",{className:"".concat(s().menuItem," ").concat(!e.available&&s().disabled),onClick:()=>{_||g(Object.keys(a)[t])},children:[(0,n.jsx)(o(),{className:s().itemImage,src:e.itemFile,width:100,height:150,alt:"foodimg"}),(0,n.jsx)("span",{className:s().itemName,children:e.itemName}),_&&(0,n.jsxs)("span",{className:s().itemMarkUnavailable,onClick:()=>{!function(e,t){let a=(0,u.N8)();(0,u.t8)((0,u.iH)(a,"menu/"+t),{...e,available:!e.available}),j()}(e,Object.keys(a)[t])},children:["Mark ",e.available&&(0,n.jsx)("span",{children:"Unavailable"}),!e.available&&(0,n.jsx)("span",{children:"Available"})]}),_&&(0,n.jsx)("span",{className:s().itemMarkUnavailable,onClick:()=>{g(Object.keys(a)[t])},children:"View Details"}),_&&(0,n.jsx)("span",{className:s().itemMarkUnavailable,onClick:()=>{!function(e){let t=(0,u.N8)();(0,u.t8)((0,u.iH)(t,"menu/"+e),{}),j()}(Object.keys(a)[t])},children:"Delete"}),(0,n.jsx)("span",{className:s().itemPrice,children:f.format(e.itemPrice)})]},t)),_&&(0,n.jsxs)("div",{className:"".concat(s().menuItem),onClick:()=>{x.push("/Menu/Order/Order")},children:[(0,n.jsx)(o(),{className:s().itemImage,src:p,width:100,height:150,alt:"add an item"}),(0,n.jsx)("span",{className:s().itemName,children:"Begin Taking Orders"})]}),_&&(0,n.jsxs)("div",{className:"".concat(s().menuItem),onClick:()=>{x.push("/Menu/CreateItem/CreateItem")},children:[(0,n.jsx)(o(),{className:s().itemImage,src:h,width:100,height:150,alt:"add an item"}),(0,n.jsx)("span",{className:s().itemName,children:"Add an Item"})]})]}),!m&&b&&(0,n.jsx)(d.default,{id:b,goToMenu:function(){v(!0)}})]})}},1477:function(e){e.exports={itemImage:"ItemDetails_itemImage__69mnf",itemDetailsContainer:"ItemDetails_itemDetailsContainer__enzGN",itemContainer:"ItemDetails_itemContainer__zrGRe",itemName:"ItemDetails_itemName__3R5ld",itemDescription:"ItemDetails_itemDescription__0gIP4",placeOrderBtn:"ItemDetails_placeOrderBtn__6CN4m",alertCover:"ItemDetails_alertCover__1i9sn",paymentAlert:"ItemDetails_paymentAlert__1Sjd8",placeOrderTitle:"ItemDetails_placeOrderTitle__wzmP3",cancelButton:"ItemDetails_cancelButton__XdmA7",unavailableBtn:"ItemDetails_unavailableBtn__BEN_0",visible:"ItemDetails_visible__04vCq"}},9848:function(e){e.exports={phoneNumberTitle:"Payment_phoneNumberTitle__wMgO5",phoneNumberInput:"Payment_phoneNumberInput___wdE0",saveButton:"Payment_saveButton__g8PkG",phoneNumberError:"Payment_phoneNumberError__mS2M0"}},8443:function(e){e.exports={itemName:"Menu_itemName__C3Hbj",menuItem:"Menu_menuItem__kwHjH",itemPrice:"Menu_itemPrice__VtPFi",menuItemsContainer:"Menu_menuItemsContainer__J3HFL",itemImage:"Menu_itemImage__OWjLC",disabled:"Menu_disabled__ZkvCw",itemMarkUnavailable:"Menu_itemMarkUnavailable__Mbq6U",addItem:"Menu_addItem__cXQ_K"}}}]);