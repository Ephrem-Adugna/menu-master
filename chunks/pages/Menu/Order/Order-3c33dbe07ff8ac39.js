(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{3209:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Menu/Order/Order",function(){return n(179)}])},6128:function(e,t){"use strict";t.Z={src:"/_next/static/media/icon.52c63941.png",height:50,width:50,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABDklEQVR4nGN0t5Nk3Hno+f/OCiNNSQleH4Z/vxmeP322pbz3wXVfB15GxmPrfdmsAjf/ZWBgsJvXabOO4e8PhqSqM8FA/qG981SZGIEMqb4a07RQP5UcYQEOHgaG/wxvX734sn/fju64OoZFjBM7rJMSAtXm8glzMDD8/gdUD9TDysTw5fl9htnLtycx7p3j/EZDVUj496+/DExACZAJ//4wAtX8Yrh+4eJbxhXFepsVhDn/f/399z/jl3/2TIyM/76z/z/K/p+R5c3zl78ZV1cZbZYU5hT5+fffL44fDLb/QWbwMu3nYGJkv3v72XvGFeWGVeKC7Cz/gNb/ZWH4BJRnYP7NwMcEtO3Fk5d/AP/naXILyHnKAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},179:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(5893),a=n(7294),r=n(9355),i=n(3299);n(8843);var c=n(6128),d=n(5528),l=n.n(d),o=n(5675),h=n.n(o),A={src:"/_next/static/media/checkMark.c485da37.png",height:150,width:101,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAQAAACb+P2wAAAAPElEQVR42iXEsQ2AIAAAsIKJ+gFHuDk7eoAP+RkTH8DMMZAwtAARAjaccOBVSLh0N9mveiBpPuwAcRUmDPuIBfiksIfFAAAAAElFTkSuQmCC",blurWidth:5,blurHeight:8},u=n(6154);let g=(e,t,n)=>{var s="".concat("http://localhost:5000","?to=").concat(e,"&body=").concat(t,"&subject=").concat(n);return u.Z.get(s)};var x=n(1163);function m(){let[e,t]=(0,a.useState)(window.sessionStorage.getItem("order")),{data:n,status:d}=(0,i.useSession)(),[o,u]=(0,a.useState)(!1),[m,j]=(0,a.useState)([]),[f,N]=(0,a.useState)({}),[_,v]=(0,a.useState)([]),b=(0,x.useRouter)();return((0,a.useEffect)(()=>{let s=(0,r.N8)(),a=(0,r.iH)((0,r.N8)());(0,r.U2)((0,r.iU)(a,"admins")).then(i=>{if(i.exists()){var c=i.val();Object.values(c).forEach((i,d)=>{if(n.user.email===i.email){u(!0);let e={};e["/admins/"+Object.keys(c)[d]]={email:i.email,acceptingOrders:!0},(0,r.Vx)((0,r.iH)(s),e),(0,r.U2)((0,r.iU)(a,"orders")).then(e=>{e.exists()&&j(e.val())}),setInterval(()=>{(0,r.U2)((0,r.iU)(a,"orders")).then(e=>{e.exists()&&j(e.val())})},2e3)}else{var l=sessionStorage.getItem("order");t(l),l&&function(){let t=(0,r.iH)((0,r.N8)());(0,r.U2)((0,r.iU)(t,"orders/".concat(e))).then(e=>{e.exists()&&N(e.val())}),setInterval(()=>{(0,r.U2)((0,r.iU)(t,"orders/".concat(e))).then(e=>{e.exists()?N(e.val()):b.push("/")})},2e3)}()}})}}).catch(e=>{console.error(e)})},[]),"authenticated"===d&&o)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:l().nav,onClick:()=>{window.location.href="/"},children:[(0,s.jsx)(h(),{src:c.Z}),(0,s.jsx)("span",{className:l().navTitle,children:"Menu Master"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:l().ordersTitle,children:"Orders"}),(0,s.jsxs)("table",{className:l().table,children:[(0,s.jsxs)("thead",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Order Number"}),(0,s.jsx)("th",{children:"Timestamp"}),(0,s.jsx)("th",{children:"Send Done"}),(0,s.jsx)("th",{children:"Close Order"})]}),(0,s.jsx)("tbody",{children:Object.values(m).map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.itemName}),(0,s.jsx)("td",{children:e.code}),(0,s.jsx)("td",{children:e.timestamp}),(0,s.jsx)("td",{onClick:()=>{!function(e,t,n){g(t,"Your order for ".concat(n," is done! Code: ").concat(e),"Menu Master").then(e=>{e.data.success&&alert("Message Sent")}).catch(e=>{console.error(e)})}(e.code,e.phoneNumber,e.itemName)},children:(0,s.jsx)(h(),{className:l().sendDoneButton,width:50,height:75,src:A})}),(0,s.jsx)("td",{children:(0,s.jsx)(h(),{className:l().sendDoneButton,width:50,height:75,src:A})})]},t))})]})]})]}):"authenticated"===d&&e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:l().nav,onClick:()=>{window.location.href="/"},children:[(0,s.jsx)(h(),{src:c.Z}),(0,s.jsx)("span",{className:l().navTitle,children:"Menu Master"})]}),(0,s.jsxs)("div",{className:l().orderContainer,children:[(0,s.jsx)("span",{className:l().codeTitle,children:"Your Code is:"}),(0,s.jsx)("span",{className:l().code,children:f.code}),(0,s.jsxs)("span",{className:l().status,children:["Order Status: ",["Pending","Ready"][f.status]]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:l().nav,onClick:()=>{window.location.href="/"},children:[(0,s.jsx)(h(),{src:c.Z}),(0,s.jsx)("span",{className:l().navTitle,children:"Menu Master"})]}),(0,s.jsx)("div",{children:"No Page"})]})}},8843:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s=n(5893),a=n(7520),r=n.n(a),i=n(9332);n(7294);var c=n(3299),d=n(5675),l=n.n(d),o={src:"/_next/static/media/googleIcon.9ef5e3c6.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA5UlEQVR42mMAgY++JhofnMwOfXQ2+/8Bgs99cLbQAku+ZbDT+GBt9vmji+l/oKLV711sdr53sT350jtSDqzg+wKZQ58SDP+/F7KyYsAGfu1j+P9rB886EPv05EXcYb3fNgT3fr8Q0vt9f0Dfjx0M/3cx/P+9mx2sYNHyZdyBfd+OAvGtgL7v/wN7f/xnuLNT8XD1Vrv/DJu84VZENP43Cuz59R+o6AADw0Z/DYbN7p+1t7j+V9/ss1Z5m+A6i5Vz/vtNfP85uPO/BliH1xYXDbXNboc0gIo0Nnv8V9kqeVh7YxxYEgDstWyoYmG2oQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},h=n(1156),A=()=>{let e=(0,i.useRouter)(),{data:t,status:n}=(0,c.useSession)();return"authenticated"===n?(0,s.jsx)(h.default,{}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{onClick:()=>{e.push("/api/auth/signin")},className:r().loginContainer,children:[(0,s.jsx)(l(),{className:r().gSignInImg,src:o,alt:"Sign In With Google",width:100}),(0,s.jsx)("span",{className:r().loginText,children:"Sign In With Google"})]})})}},5528:function(e){e.exports={nav:"Order_nav___0yCX",navTitle:"Order_navTitle__zluVl",ordersTitle:"Order_ordersTitle__kNSeg",table:"Order_table__ahGDv",codeTitle:"Order_codeTitle__d6gyg",orderContainer:"Order_orderContainer__nUlxq",code:"Order_code__pUU1p",status:"Order_status__N7BHL",sendDoneButton:"Order_sendDoneButton__dWhRi"}},7520:function(e){e.exports={gSignInImg:"Landing_gSignInImg__O3ZOx",loginText:"Landing_loginText__BwqHK",loginContainer:"Landing_loginContainer__RMDnV"}},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[345,675,156,774,888,179],function(){return e(e.s=3209)}),_N_E=e.O()}]);